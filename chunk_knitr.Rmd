---
title: "청크 옵션 이해하기"
description: |
  knitr R 코드 청크의 옵션을 활용하는 방법을 익힙니다.
site: distill::distill_website
output:
  distill::distill_article:
    toc: true
    toc_depth: 3  
author:
  - name: 유충현 
    url: https://choonghyunryu.github.io/
    affiliation: 한화생명
date: 2021-10-31     
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE, 
                      collapse = FALSE,
                      fig.align = "center")
knitr::opts_chunk$set(fig.width = 12, fig.height = 9)

library(shiny)
library(htmltools)

xaringanExtra :: use_panelset()
```

```{r tidyverse, echo=FALSE, out.width = "20%"}
knitr::include_graphics("img/knitr.png")
```

```{r, preface, echo=FALSE}
div(class = "preface", 
    h4("들어가기"),
    "RStudio의 R 마크다운은 기본적으로 knitr 코드 청크를 사용합니다.", br(),
    "청크 옵션을 아는만큼 문서의 품질이 향상됩니다. 대표적인 청크 옵션을 사용하는 방법을 익혀서 여러분의 문서에 날개를 달아주기 바랍니다.")
```

## 작업중입니다.

## R 마크다운 문서의 이해
### R 마크다운 문서의 분해

앞서 만들었던 첫 R 마크다운 문서를 분해하면 다음과 같습니다.

![R 마크다운 문서의 분해](img/decompose_rmarkdown.png){width=90% height=100%}

* YMAL 헤더
    + R 마크다운의 헤더 영역으로, 출력 문서를 세부적으로 제어합니다.
* R 코드 청크
    + 수행할 R 코드를 포함한 영역입니다.
* 마크다운 태그를 포함한 텍스트
    + 문서의 서식과 텍스트를 정의하는 영역입니다.

### 튜토리얼의 범위

이 튜토리얼은 R 마크다운 문서의 분해 중에서의 **knitr의 R 코드 청크 옵션을 이해할 목적**으로 진행합니다. 대표적인 청크 옵션을 이해하고, 다루지 않는 다른 옵션의 사용을 시도할 수 있는 자신감 함양을 유도합니다.   


## knitr의 R 코드 청크

### 청크의 구조 이해하기

우리는 지금 R 코드 청크를 다루고 있습니다. 그런데 knitr은 **bash sehll**(리눅스 쉘 스크립트), **python**(파이썬) 코드 청크 외에 몇개의 코드 청크를 지원합니다.

예를 들어 R 마크다운에서 리눅스 쉘 스크립트 청크를 사용하려면 다음과 같이 기술합니다. 이것은 **리눅스에서 날짜를 조회하는 명령어**인 **`date`**를 수행한 후 그 결과를 마크다운 문서에 삽입합니다.


::: {.panelset}

::: {.panel}
#### bash 코드청크 {.panel-name}

````
```{bash}`r ''`
# 날짜와 일시 출력
date

# 'YYYY-MM-DD' 포맷의 날짜 출력
date +'%Y-%m-%d'
```
````

:::


::: {.panel}
#### 수행결과 {.panel-name}

```{bash}
# 날짜와 일시 출력
date

# 'YYYY-MM-DD' 포맷의 날짜 출력
date +'%Y-%m-%d'
```

:::

:::


브레이스(\{) 뒤에 오는 'bash'는 bash 쉘이 코드 청크를 실행하라는 의미입니다. 그러면, R에게 실행을 요청하기 위한 청크는 다음과 같이 사용합니다. 당연히 브레이스 뒤에 'r'이 따라옵니다.

<div class="preface", style="padding-bottom: 0px;">
<pre class="sourceCode r", style="font-family: 'NanumSquare'; font-size:12pt; color: red;">
```{r 청크이름, 옵션이름=옵션값, 옵션이름=옵션값, ...}`r ''`
R 코드 삽입 영역
```
</pre></div>


<br>


* 청크 이름은 청크를 식별하는 식별자입니다. 
    + 청크 이름을 기술하지 않아도 청크는 정상적으로 수행됩니다. 
    + R 마크다운 컴파일의 진행경과
    + 오류가 발생하는 청크의 인식 등을 위해 기술하는 것이 좋습니다.
* 옵션이름 = 옵션값 형식으로 옵션을 기술합니다.
    + 옵션을 기술하지 않아도 됩니다.
    + 이 경우에는 옵션의 기본 설정값이 적용됩니다.


### knitr의 R 코드 청크 옵션 

knitr 홈페이지의 [https://yihui.org/knitr/options/](https://yihui.org/knitr/options/){target="_blank"} 페이지에는 청크 옵션에 대해서 잘 설명되어 있습니다.


다음은 대표적인 청크 옵션의 목록입니다. 이 옵션들은 반드시 숙지하시기 바랍니다.

#### 코드와 결과 출력 관련 청크 옵션

튜토리얼에서 익혀야 할 출력 관련  대표적인 청크 옵션입니다.

+-------------+----------+-------------------------------------------------+
| 옵션        | 기본값   | 기능                                            |
+=============+==========+=================================================+
| eval        | TRUE     | 청크를 실행하고, 그 결과를 삽입하는 여부 설정   |
+-------------+----------+-------------------------------------------------+
| echo        | TRUE     | 실행한 명령어도 함께 출력하는지의 여부 설정     |
+-------------+----------+-------------------------------------------------+
| warning     | TRUE     | 경고 메시지의 출력 여부 설정                    |
+-------------+----------+-------------------------------------------------+
| error       | FALSE    | 에러 메시지의 출력 여부 설정                    |
+-------------+----------+-------------------------------------------------+
| message     | TRUE     | 경고, 에러 외의 메시지의 출력 여부 설정         |
+-------------+----------+-------------------------------------------------+
| tidy        | FALSE    | R 코드를 깔끔하게 정돈해서 출력할지의 여부 설정 |
+-------------+----------+-------------------------------------------------+
| comment     | "\#\#"   | 실행 결과 출력 각 라인의 앞에 넣을 prefix       |
+-------------+----------+-------------------------------------------------+

: R 코드와 결과 출력 관련 청크 옵션 목록


#### 시각화 관련 청크 옵션

튜토리얼에서 익혀야 할 시각화 관련 대표적인 청크 옵션입니다.

+--------------+-----------+------------------------------------------------------------+
| 옵션         | 기본값    | 기능                                                       |
+==============+===========+============================================================+
| fig.width    | 7         | 출력을 위해 생성할 이미지 파일의 너비, 단위: 인치.         |
+--------------+-----------+------------------------------------------------------------+
| fig.height   | 7         | 출력을 위해 생성할 이미지 파일의 높이, 단위: 인치.         |
+--------------+-----------+------------------------------------------------------------+
| fig.align    | "default" | 플롯의 정렬 방법. `"left"`, `"right"`, `"center"`에서 선택 |
+--------------+-----------+------------------------------------------------------------+
| fig.path     | 'figure/' | 시각화 이미지 파일을 저장할 디렉토리 경로                  |
+--------------+-----------+------------------------------------------------------------+
| fig.cap      | NULL      | 플롯의 캡션 문자 정의                                      |
+--------------+-----------+------------------------------------------------------------+
| out.width    |           | 시각화가 화면에 출력되는 너비, 예) "75%", "300px"          |
+--------------+-----------+------------------------------------------------------------+

: R 코드와 결과 시각화 관련 청크 옵션 목록


## 핸즈온 준비하기

### 핸즈온 파일 다운로드하기

* 핸즈온 튜토리얼을 수행하기 위해서 아래 "청크 옵션 이해하기 튜토리얼 파일" 링크의 R 마크다운 파일을 다운로드합니다.
     + 링크에 마우스를 올려, 오른쪽 버튼으로 "다른이름으로 파일저장"을 실행합니다.
* 다운로드한 파일을 RStudio로 읽어들입니다.     

[청크 옵션 이해하기 튜토리얼 파일](tutorials/understand_chunk.Rmd){target="_blank"}


## 핸즈온

### 1. R 코드 출력 제어하기

#### 1.1. R 코드와 함께 결과 출력하기

> 1. 다음 지문을 수행할, **분석 경험을 위해 코드와 결과를 공유할 청크**를 만들려고 합니다.
>    + iris 데이터에서 중복인 데이터가 1건 있습니다. 추출하여 출력해 보세요.
>    + R 코드와 결과를 함께 출력해 보세요.
>    + 청크 이름은 'dup_iris'로 정의합니다.
> 2. 'understand_chunk.Rmd'의 1-1. 빈 영역을 채우고 실행해 봅니다.
>    + 모범 답안을 보지 않고 만들어 보세요.

::: {.panelset}

::: {.panel}
#### 힌트 보기 {.panel-name}

여러 방법이 있는데, 다음 코드를 사용해 보세요.
<br>

````
iris[duplicated(iris), ]
````

:::

::: {.panel}
#### 모범 답안 {.panel-name}

````
```{r dup_iris}`r ''`
iris[duplicated(iris), ]
```
````
:::

::: {.panel}
#### 실행 결과 {.panel-name}

```{r dup_iris}
iris[duplicated(iris), ]
```
:::

:::

<br>

#### 1.2. 결과만 출력하기

> 1. 다음 지문을 수행할, **분석 결과만 공유할 청크**를 만들려고 합니다.
>    + summary() 함수로 iris 데이터의 각 변수들을 요약해 보세요.
>    + 결과만 출력해 보세요.
>    + 청크 이름은 'dup_iris_result'로 정의합니다.
> 2. 'understand_chunk.Rmd'의 1-2. 빈 영역을 채우고 실행해 봅니다.
>    + 모범 답안을 보지 않고 만들어 보세요.

::: {.panelset}

::: {.panel}
#### 힌트 보기 {.panel-name}

다음 코드를 사용해 보세요.
<br>

````
summary(iris)
````

:::

::: {.panel}
#### 모범 답안 {.panel-name}

````
```{r dup_iris_result, echo=FALSE}`r ''`
which[duplicated(iris)]
```
````
:::

::: {.panel}
#### 실행 결과 {.panel-name}

```{r dup_iris_result, echo=FALSE}
summary(iris)
```
:::

:::




## 요약 
### 핸즈온 요약

### I can do it




